



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Textile makes it easy for you or your application to store and distribute data over the IPFS network.">
      
      
        <link rel="canonical" href="https://docs.textile.io/threads/">
      
      
        <meta name="author" content="textile.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.1.0">
    
    
      
        <title>Introduction | Documentation | Textile</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.86c34351.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../css/textile.css">
    
    <script src="https://cdn.usefathom.com/3.js" site="TEBMKXIY"></script>
    <script>
        window.fathom || document.write('<script src="https://grouse.textile.io/core.js"><\/script>');
    </script>
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="default" data-md-color-accent="default">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#getting-started" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.textile.io/" title="Documentation" class="md-header-nav__button md-logo">
          
            <img src="../images/hex.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Documentation
            </span>
            <span class="md-header-nav__topic">
              Introduction
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/textileio/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    textileio/docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.textile.io/" title="Documentation" class="md-nav__button md-logo">
      
        <img src="../images/hex.svg" width="48" height="48">
      
    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/textileio/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    textileio/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" target="" class="md-nav__link ">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      The Hub
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        The Hub
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/accounts/" title="Accounts" target="" class="md-nav__link ">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/app-apis/" title="App APIs" target="" class="md-nav__link ">
      App APIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Hub CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Hub CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_login/" title="Login" target="" class="md-nav__link ">
      Login
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_logout/" title="Logout" target="" class="md-nav__link ">
      Logout
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_whoami/" title="Whoami" target="" class="md-nav__link ">
      Whoami
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_orgs/" title="Orgs" target="" class="md-nav__link ">
      Orgs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck/" title="Bucket" target="" class="md-nav__link ">
      Bucket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_threads/" title="Threads" target="" class="md-nav__link ">
      Threads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_keys/" title="API Keys" target="" class="md-nav__link ">
      API Keys
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/" title="JavaScript" target="_blank" class="md-nav__link _blank">
      JavaScript
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Buckets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Buckets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../buckets/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Buckets CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Buckets CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_add/" title="Add" target="" class="md-nav__link ">
      Add
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_archive/" title="Archive" target="" class="md-nav__link ">
      Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_cat/" title="Cat" target="" class="md-nav__link ">
      Cat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_destroy/" title="Destroy" target="" class="md-nav__link ">
      Destroy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_init/" title="Init" target="" class="md-nav__link ">
      Init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_links/" title="Links" target="" class="md-nav__link ">
      Links
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_ls/" title="Ls" target="" class="md-nav__link ">
      Ls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_pull/" title="Pull" target="" class="md-nav__link ">
      Pull
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_push/" title="Push" target="" class="md-nav__link ">
      Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_root/" title="Root" target="" class="md-nav__link ">
      Root
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hub/cli/hub_buck_status/" title="Status" target="" class="md-nav__link ">
      Status
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/hub.buckets" title="JavaScript" target="" class="md-nav__link ">
      JavaScript
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      ThreadDB
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        ThreadDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Introduction
      </label>
    
    <a href="./" title="Introduction" class="md-nav__link md-nav__link--active">
      Introduction
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-use-threaddb" title="How to use ThreadDB" class="md-nav__link">
    How to use ThreadDB
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#golang" title="Golang" class="md-nav__link">
    Golang
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascript" title="JavaScript" class="md-nav__link">
    JavaScript
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-api" title="Developer API" class="md-nav__link">
    Developer API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-organization" title="Data organization" class="md-nav__link">
    Data organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-new-database" title="Creating a new database" class="md-nav__link">
    Creating a new database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" title="Collections" class="md-nav__link">
    Collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instances" title="Instances" class="md-nav__link">
    Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query" title="Query" class="md-nav__link">
    Query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listen" title="Listen" class="md-nav__link">
    Listen
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-database-as-an-observable" title="Using the Database as an Observable" class="md-nav__link">
    Using the Database as an Observable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-user-databases" title="Multi-user Databases" class="md-nav__link">
    Multi-user Databases
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-control" title="Access-control" class="md-nav__link">
    Access-control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity" title="Identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replication-with-the-hub" title="Replication with the Hub" class="md-nav__link">
    Replication with the Hub
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-to-the-hub" title="Connect to the Hub" class="md-nav__link">
    Connect to the Hub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pinning-relay-and-replication" title="Pinning, Relay, and Replication" class="md-nav__link">
    Pinning, Relay, and Replication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-details" title="Advanced Details" class="md-nav__link">
    Advanced Details
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://godoc.org/github.com/textileio/go-threads/api/client" title="Golang" target="_blank" class="md-nav__link _blank">
      Golang
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-hub/docs/hub.client" title="JavaScript Client" target="_blank" class="md-nav__link _blank">
      JavaScript Client
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-threads/modules/_textile_threads_database.html" title="JavaScript Database" target="_blank" class="md-nav__link _blank">
      JavaScript Database
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Powergate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Powergate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/" title="Introduction" target="" class="md-nav__link ">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/devnet/" title="Devnet" target="" class="md-nav__link ">
      Devnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/testnet/" title="Testnet" target="" class="md-nav__link ">
      Testnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Store Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Store Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/ffs/" title="Intro to FFS" target="" class="md-nav__link ">
      Intro to FFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cidconfig/" title="Storage Configs" target="" class="md-nav__link ">
      Storage Configs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      POW CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        POW CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow/" title="Overview" target="" class="md-nav__link ">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_ffs/" title="FFS" target="" class="md-nav__link ">
      FFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_asks/" title="Asks" target="" class="md-nav__link ">
      Asks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_deals/" title="Deals" target="" class="md-nav__link ">
      Deals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_faults/" title="Faults" target="" class="md-nav__link ">
      Faults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_miners/" title="Miners" target="" class="md-nav__link ">
      Miners
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_net/" title="Net" target="" class="md-nav__link ">
      Net
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_reputation/" title="Reputation" target="" class="md-nav__link ">
      Reputation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_wallet/" title="Wallet" target="" class="md-nav__link ">
      Wallet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../powergate/cli/pow_health/" title="Health" target="" class="md-nav__link ">
      Health
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://textileio.github.io/js-powergate-client/" title="JavaScript" target="_blank" class="md-nav__link _blank">
      JavaScript
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://godoc.org/github.com/textileio/powergate/api/client" title="Golang" target="_blank" class="md-nav__link _blank">
      Golang
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/hub/web-app/" title="Build a Web App using Hub APIs" target="" class="md-nav__link ">
      Build a Web App using Hub APIs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/static-websites/" title="Host a Website in a Bucket" target="" class="md-nav__link ">
      Host a Website in a Bucket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/react-native-buckets/" title="Create User Buckets & Threads in React Native" target="" class="md-nav__link ">
      Create User Buckets & Threads in React Native
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/golang/getting-started/" title="Getting started with Golang" target="" class="md-nav__link ">
      Getting started with Golang
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      ThreadDB
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        ThreadDB
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/react-native-hub-app" title="Threads from React Native (JavaScript)" target="_blank" class="md-nav__link _blank">
      Threads from React Native (JavaScript)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/blob/master/examples/chat/main.go" title="Chat App (Golang)" target="_blank" class="md-nav__link _blank">
      Chat App (Golang)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/tree/master/examples/local_eventstore" title="Event Store (Golang)" target="_blank" class="md-nav__link _blank">
      Event Store (Golang)
    </a>
  </li>

  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/go-threads/tree/master/examples/e2e_counter" title="P2P Counter (Golang)" target="_blank" class="md-nav__link _blank">
      P2P Counter (Golang)
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Buckets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Buckets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <!-- Added the Externals filter so we could do target=_blank for a bit better ux -->
  
  
  
    
    
    


  <li class="md-nav__item">
    <a href="https://github.com/textileio/js-examples/tree/master/react-native-hub-app" title="Buckets from React Native (JavaScript)" target="_blank" class="md-nav__link _blank">
      Buckets from React Native (JavaScript)
    </a>
  </li>

  
  

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-use-threaddb" title="How to use ThreadDB" class="md-nav__link">
    How to use ThreadDB
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#golang" title="Golang" class="md-nav__link">
    Golang
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javascript" title="JavaScript" class="md-nav__link">
    JavaScript
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-api" title="Developer API" class="md-nav__link">
    Developer API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-organization" title="Data organization" class="md-nav__link">
    Data organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-new-database" title="Creating a new database" class="md-nav__link">
    Creating a new database
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#collections" title="Collections" class="md-nav__link">
    Collections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instances" title="Instances" class="md-nav__link">
    Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query" title="Query" class="md-nav__link">
    Query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listen" title="Listen" class="md-nav__link">
    Listen
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-database-as-an-observable" title="Using the Database as an Observable" class="md-nav__link">
    Using the Database as an Observable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-user-databases" title="Multi-user Databases" class="md-nav__link">
    Multi-user Databases
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-control" title="Access-control" class="md-nav__link">
    Access-control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identity" title="Identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replication-with-the-hub" title="Replication with the Hub" class="md-nav__link">
    Replication with the Hub
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-to-the-hub" title="Connect to the Hub" class="md-nav__link">
    Connect to the Hub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pinning-relay-and-replication" title="Pinning, Relay, and Replication" class="md-nav__link">
    Pinning, Relay, and Replication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-details" title="Advanced Details" class="md-nav__link">
    Advanced Details
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">

            <article class="md-content__inner md-typeset">
              
                
                  <img class="center" src="../images/threads-hero.png" />
                
                
                  <a href="https://github.com/textileio/docs/edit/master/docs/threads/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h1>
<p>ThreadDB is a p2p database built on <a href="https://ipfs.io">IPFS</a> and <a href="https://libp2p.io">Libp2p</a>. Together, the Threads Protocol and Database provide an alternative architecture for data on the web. ThreadDB aims to help power a new generation of web technologies by combining a novel use of event sourcing, Interplanetary Linked Data (<a href="https://ipld.io">IPLD</a>), and access control to provide a distributed, scalable, and flexible database solution for decentralized applications.</p>
<h3 id="how-to-use-threaddb">How to use ThreadDB<a class="headerlink" href="#how-to-use-threaddb" title="Permanent link">&para;</a></h3>
<p>There are two implementations of ThreadDB. </p>
<h4 id="golang">Golang<a class="headerlink" href="#golang" title="Permanent link">&para;</a></h4>
<p>The first is written in Go and can be found at <a href="https://github.com/textileio/go-threads/">https://github.com/textileio/go-threads/</a>. This is the reference implementation, it contains all the latest components to use as a library, write trustless services, <a href="https://godoc.org/github.com/textileio/go-threads/api/client">build a client</a> connected to a a threads daemon. More documentation for the Go implementation will be coming in the future.</p>
<h4 id="javascript">JavaScript<a class="headerlink" href="#javascript" title="Permanent link">&para;</a></h4>
<p>The second implementation is written in JavaScript (Typescript, really). This implementation has some optimizations to make it more ideal when writing web applications. The JavaScript implementation is best understood through the <a href="https://textileio.github.io/js-hub/docs/hub.client">Client</a> and <a href="https://textileio.github.io/js-threads/modules/_textile_threads_database.html">Database</a> documentation.</p>
<p>In general, when you are building apps that use threads in remote context (e.g. the browser) it's best to push the networking later to remote services whenever possible (while using/allowing p2p when it works). For this, we recommend using <code>js-threads</code> using the Hub's APIs. Using the <a href="https://textileio.github.io/js-threads/modules/_textile_threads_database.html">Database</a> for example, you can perform all signing and encryption locally, keeping thread ownership with your users, but push persistence and networking to the remote Hub. You can also build your own remote relays and services using the <a href="https://github.com/textileio/go-threads/">go-threads</a> library.</p>
<p>For the rest of the explanation below, we'll focus on examples using the JavaScript library.</p>
<h3 id="developer-api">Developer API<a class="headerlink" href="#developer-api" title="Permanent link">&para;</a></h3>
<p>ThreadDB is designed to be simple enough for any developer to start using. The API will feel familiar to developers who have worked with technologies like MongoDB.</p>
<h4 id="data-organization">Data organization<a class="headerlink" href="#data-organization" title="Permanent link">&para;</a></h4>
<p>The first three concepts a developer will encounter with ThreadDB are <a href="#databases">Databases</a>, <a href="#collections">Collections</a>, and <a href="#instances">Instances</a>. Instances are the individual records you create, update, or delete. Instances are stored in a Collection. Collections have one or many Schemas and can only store Instances that match one of those Schemas. Databases can store many Collections. Collections are similar to Tables in other databases. A Thread-based Database is tied to a single Thread (with associated Thread ID).</p>
<h4 id="creating-a-new-database">Creating a new database<a class="headerlink" href="#creating-a-new-database" title="Permanent link">&para;</a></h4>
<p>To start a new, empty Database, with remote networking using the Hub APIs you simply initialize your database with the <code>UserAuth</code> object. You can read more about creating <code>UserAuth</code> objects in <a href="../tutorials/hub/web-app/">the creating web apps tutorial</a>.</p>
<p>Running the DB in this way will greatly improve performance, by pushing signed and encrypted updates to the always on service on the Hub for other trusted peers to find and pull.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>A new <a href="https://github.com/ipfs/js-datastore-level">Level Datastore</a> is used as the backing store by default if no datastore is explicitly supplied.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span><span class="p">,</span> <span class="nx">Identity</span><span class="p">,</span> <span class="nx">UserAuth</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">create</span> <span class="p">(</span><span class="nx">auth</span>: <span class="kt">UserAuth</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">Database</span><span class="p">.</span><span class="nx">withUserAuth</span><span class="p">(</span><span class="nx">auth</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">db</span>
<span class="p">}</span>
</code></pre></div>

<!--
Depends on: https://github.com/textileio/js-threads/issues/293

The above assumes you are running the database in insecure environments such as the browser, but if you are running the database in a secure environment you can skip the tutorial and provide you [API keys](../hub/app-apis.md) directly.

<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span><span class="p">,</span> <span class="nx">KeyInfo</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">create</span> <span class="p">(</span><span class="nx">keys</span>: <span class="kt">KeyInfo</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// const db = Database.withKeyInfo(keys, name)</span>
  <span class="c1">// return db</span>
<span class="p">}</span>
</code></pre></div>
-->

<p>With your database created, you now need to <em>start</em> it. Starting a database requires the data owner's identity. In these examples, we'll use a <a href="../tutorials/hub/libp2p-identities/">random public-key infrastructure (PKI) based identity</a>, however, see <a href="#identity">Identity</a> for further details and links.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span><span class="p">,</span> <span class="nx">Identity</span><span class="p">,</span> <span class="nx">ThreadID</span><span class="p">,</span> <span class="nx">UserAuth</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">start</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">,</span> <span class="nx">identity</span>: <span class="kt">Identity</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">threadID</span> <span class="o">=</span> <span class="nx">ThreadID</span><span class="p">.</span><span class="nx">fromRandom</span><span class="p">()</span>
  <span class="nx">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">identity</span><span class="p">,</span> <span class="p">{</span> <span class="nx">threadID</span> <span class="p">})</span>
<span class="p">}</span>
</code></pre></div>

<p>Congrats! You now have a new ThreadDB! Each ThreadDB has a unique <a href="https://textileio.github.io/js-hub/docs/hub.threadid">ThreadID</a>. You can create your own ThreadIDs, or easily generate a random ThreadID as we do in the above example.</p>
<h3 id="collections">Collections<a class="headerlink" href="#collections" title="Permanent link">&para;</a></h3>
<p>To handle different data structures in the same Database, a Database contains Collections. Each Collection is defined by a <a href="https://json-schema.org/">json-schema.org schema</a>. These schemas define the <em>shape</em> of Collection Instances (the individual entries). Collections are similar to tables in other databases. Ultimately, a Collection is a single document store with a set of APIs to make it feel like a <em>local database table</em>.</p>
<p>Collections can be created from an existing Schema.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span><span class="p">,</span> <span class="nx">JSONSchema</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="c1">// Define a simple person schema</span>
<span class="kr">const</span> <span class="nx">schema</span>: <span class="kt">JSONSchema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">$schema</span><span class="o">:</span> <span class="s1">&#39;http://json-schema.org/draft-07/schema#&#39;</span><span class="p">,</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Person&#39;</span><span class="p">,</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
  <span class="nx">properties</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">_id</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span> <span class="p">},</span>
    <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;string&#39;</span> <span class="p">},</span>
    <span class="nx">age</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span>
      <span class="nx">minimum</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">exclusiveMaximum</span>: <span class="kt">100</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="c1">// Requires the started database we created above</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">collectionFromSchema</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">Person</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">newCollection</span><span class="p">(</span><span class="s1">&#39;Person&#39;</span><span class="p">,</span> <span class="nx">schema</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">Person</span>
<span class="p">}</span>
</code></pre></div>

<p>Or from an existing object/instance.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// All collections have an _id field</span>
  <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">points</span>: <span class="kt">0</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">// Requires the started database we created above</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">collectionFromObject</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">Player</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">newCollectionFromObject</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Since you don't need to create a Collection if it already exists in your database, a more complete Collection creation step can use the name of the collection to check if it exists first.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">points</span>: <span class="kt">0</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">// Requires the started database we generated above</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">getOrCreatePlayers</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span><span class="nx">collections</span><span class="p">}</span> <span class="o">=</span> <span class="nx">db</span>
    <span class="kr">const</span> <span class="nx">existing</span> <span class="o">=</span> <span class="nx">collections</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">existing</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">existing</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">newCollectionFromObject</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="instances">Instances<a class="headerlink" href="#instances" title="Permanent link">&para;</a></h3>
<p>Instances are the objects you store in your Collection. Instances are JSON documents with schemas that match those defined in your Collection. Updates to an Instance are driven by <a href="https://github.com/Starcounter-Jack/JSON-Patch">JSON Patch</a> semantics by default, but will be made to support other types (CRDT-driven documents for instance) in the future (some of which are already under active development). Creating and manipulating them is simple.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="c1">// Requires the started database we generated above containing the Player collection</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">example</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">Player</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collections</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Player</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Collection does not exist&#39;</span><span class="p">)</span>

  <span class="c1">// Create an instance for the Collection and then save it</span>
  <span class="kr">const</span> <span class="nx">beth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">({</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;beth&#39;</span> <span class="p">})</span> <span class="c1">// Not yet persisted</span>
  <span class="nx">await</span> <span class="nx">beth</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span> <span class="c1">// Persist changes to db</span>

  <span class="c1">// Modify the `beth` instance</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="nx">await</span> <span class="nx">beth</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span> <span class="c1">// Save changes</span>

  <span class="c1">// Modify it again</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">team</span> <span class="o">=</span> <span class="s1">&#39;Astronauts&#39;</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="mi">2</span>

  <span class="c1">// Save it from the Collection</span>
  <span class="nx">await</span> <span class="nx">Player</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">beth</span><span class="p">)</span>

  <span class="c1">// Delete it from the Collection</span>
  <span class="nx">await</span> <span class="nx">Player</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">beth</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span>

  <span class="c1">// etc!</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<p>Each Threads implementation supports query and look-up capabilities such as <code>insert</code>, <code>findOne</code>, <code>has</code>, and more. ThreadDB also supports the <a href="https://github.com/kofrasa/mingo">MongoDB query language</a>. In the JavaScript library, you might write queries like the following. Queries return <code>AsyncIterableIterators</code>, so you can loop over them and take appropriate action.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">collect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;streaming-iterables&#39;</span>

<span class="c1">// Requires the started database we generated above containing the Player collection</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createQuery</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">Player</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collections</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Player</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Collection does not exist&#39;</span><span class="p">)</span>

  <span class="nx">await</span> <span class="nx">Player</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span>
    <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">points</span>: <span class="kt">11</span><span class="p">,</span> <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;beth&#39;</span><span class="p">},</span>
    <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">points</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;jim&#39;</span><span class="p">},</span>
    <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">points</span>: <span class="kt">18</span><span class="p">,</span> <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;issac&#39;</span><span class="p">},</span>
    <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">points</span>: <span class="kt">7</span><span class="p">,</span> <span class="nx">team</span><span class="o">:</span> <span class="s1">&#39;Astronauts&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;beth&#39;</span><span class="p">},</span>
  <span class="p">)</span>
  <span class="c1">// Setup a query</span>
  <span class="kr">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">$or</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">points</span><span class="o">:</span> <span class="p">{</span> <span class="nx">$gt</span>: <span class="kt">10</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;jim&#39;</span> <span class="p">},</span>
    <span class="p">]</span>
  <span class="p">}</span>
  <span class="c1">// Get results</span>
  <span class="kr">const</span> <span class="nx">all</span> <span class="o">=</span> <span class="nx">Player</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
  <span class="c1">// Loop over AsyncIterableIterator result and log the names</span>
  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="p">{</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">}</span> <span class="k">of</span> <span class="nx">await</span> <span class="nx">collect</span><span class="p">(</span><span class="nx">all</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="listen">Listen<a class="headerlink" href="#listen" title="Permanent link">&para;</a></h3>
<p>A Database also has an event emitter, and listeners can subscribe to events. For example, event <em>names</em> are structured as <code>&lt;collection&gt;.&lt;id&gt;.&lt;type&gt;</code>, and they support 'wildcard' matching, so <code>db.emitter.many(['foo', '*', 2], callback)</code> will match all delete operations (<code>{ create: 0; save: 1, delete: 2 }</code>) on the 'foo' collection. Similarly, <code>db.emitter.on('foo.**', callback)</code> will match all event types on the 'foo' collection. To observe a given instance, try <code>db.emitter.on('foo.${instance._id}', callback)</code>. See <a href="https://github.com/EventEmitter2/EventEmitter2">EventEmitter2</a> docs for further details. To illustrate, the following database manipulations could be observed via the following simple listener.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>

<span class="c1">// Requires the started database we generated above containing the Player collection</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">emitter</span> <span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">db</span><span class="p">.</span><span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;**&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">update</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">update</span><span class="p">)</span> <span class="c1">// Logs the following updates...</span>
  <span class="p">})</span>

  <span class="kr">const</span> <span class="nx">Player</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collections</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;Player&#39;</span><span class="p">)</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Player</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Collection does not exist&#39;</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">beth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">({</span> <span class="nx">_id</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;beth&#39;</span> <span class="p">})</span>
  <span class="nx">await</span> <span class="nx">beth</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="nx">await</span> <span class="nx">beth</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">team</span> <span class="o">=</span> <span class="s1">&#39;Astronauts&#39;</span>
  <span class="nx">beth</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="nx">await</span> <span class="nx">Player</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">beth</span><span class="p">)</span>
  <span class="nx">await</span> <span class="nx">Player</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">beth</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="using-the-database-as-an-observable">Using the Database as an Observable<a class="headerlink" href="#using-the-database-as-an-observable" title="Permanent link">&para;</a></h4>
<p>If you are building with React, you may be interested in integrating database updates as an <a href="https://redux-observable.js.org/">Observable</a>, so that changes to your dataset can immediately change the UI (and other use-cases). Doing so is quite simple using the emitter described above. You can combine the emitter with a selector using the pattern <code>&lt;collection&gt;.&lt;instance&gt;.&lt;type&gt;</code>. In the example here, we select for all <code>create</code> events (<code>0</code>) on the <code>Player</code> collection we created above, so <code>Player.*.0</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">Database</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@textile/threads&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">fromEvent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">returnObservable</span><span class="p">(</span><span class="nx">db</span>: <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">fromEvent</span><span class="p">(</span><span class="nx">db</span><span class="p">.</span><span class="nx">emitter</span><span class="p">,</span> <span class="s1">&#39;Player.*.0&#39;</span><span class="p">)</span> <span class="c1">// fromEvent returns an Observable</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="multi-user-databases">Multi-user Databases<a class="headerlink" href="#multi-user-databases" title="Permanent link">&para;</a></h2>
<p>Everything above just looks like a database, so what's a Thread? ThreadDB combines the storage and management of data (the <em>Database</em>) with networking, access control, and replication over IPFS using the Threads <em>Protocol</em>. The Threads protocol has been extensively documented in the <a href="https://docsend.com/view/gu3ywqi">whitepaper</a>, but in short, Threads use private-key encryption to manage both security and identity among multiple parties that can access or edit the same Database.</p>
<h3 id="access-control">Access-control<a class="headerlink" href="#access-control" title="Permanent link">&para;</a></h3>
<p>ThreadDB uses a modular role-based access control system that will allow access control lists (ACLs) to be declared in a wide-variety of ways. ACLs are in active development and you can <a href="https://github.com/textileio/go-threads/issues/295">follow the development here</a>.</p>
<h3 id="identity">Identity<a class="headerlink" href="#identity" title="Permanent link">&para;</a></h3>
<p>ThreadDB allows you to handle user identities (for access control and security/encryption) in the best way for your app and your users. In order to handle <em>multiple</em> peers collaborating on a single database, as well as the ability to handle storage <em>on behalf</em> of a user, ThreadDB expects a simple Identity interface for singing and validating database updates. See the Hub documentation on <a href="../hub/app-apis/#user-identities">user identities</a> for details.</p>
<h2 id="replication-with-the-hub">Replication with the Hub<a class="headerlink" href="#replication-with-the-hub" title="Permanent link">&para;</a></h2>
<p>ThreadDB has been designed to support trustless peers on the network to provide services that improve or enhance performance and experience for end-users. <a href="../hub/">The Hub</a> offers Thread Services for relay, replication, and backup that you can add for your users in a couple of minutes. You can learn more about Identity, Access Control, and other advanced topics, in the Hub documentation.</p>
<h3 id="connect-to-the-hub">Connect to the Hub<a class="headerlink" href="#connect-to-the-hub" title="Permanent link">&para;</a></h3>
<ol>
<li><a href="../hub/accounts/#account-setup">Create an Account</a></li>
<li><a href="../hub/app-apis/#api-access">Create an App Token</a></li>
<li><a href="https://textileio.github.io/js-hub" target="_blank">Add the Textile Hub Library to your App</a></li>
</ol>
<h3 id="pinning-relay-and-replication">Pinning, Relay, and Replication<a class="headerlink" href="#pinning-relay-and-replication" title="Permanent link">&para;</a></h3>
<p>Thread Services (e.g. pinning encrypted data on IPFS and helping multiple peers relay updates across the network) can be built and deployed to the network using <a href="https://github.com/textileio/go-threads">go-threads</a>. Textile offers a number of these functions through the Hub. Attaching the Hub to your databases will allow you to deliver a high-quality user-experience.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>ThreadDB can be used from many different languages and has libraries written in Javascript and Go. Find documentation on each of those Libraries below. </p>
<div class="txtl-options">
  <a href="https://textileio.github.io/js-threads/" class="box">
    <h5>JavaScript</h5>
    <p>Add Threads to NodeJS, React Native or browser apps.</p>
  </a>
  <span class="box-space"> </span>
  <a href="https://godoc.org/github.com/textileio/go-threads/api/client" class="box">
    <h5>Golang</h5>
    <p>Use Threads in Go or compile to many other platforms.</p>
  </a>
  <span class="box-space"> </span>
  <span class="box-fill">
  </span>
</div>

<h2 id="advanced-details">Advanced Details<a class="headerlink" href="#advanced-details" title="Permanent link">&para;</a></h2>
<p>The protocols and design of ThreadDB can be explored in detail in the whitepaper: <a href="https://docsend.com/view/gu3ywqi">A protocol &amp; event-sourced database for decentralized user-siloed data</a>. For further technical details. the reference implementation of Threads is written in Go and the full implementation details can be found <a href="https://godoc.org/github.com/textileio/go-threads">on godocs</a> (jump to <a href="https://godoc.org/github.com/textileio/go-threads/api/client">go-threads client</a>).</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../hub/cli/hub_buck_status/" title="Status" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Status
              </span>
            </div>
          </a>
        
        
          <a href="../powergate/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; Textile
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://textile.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/textileio" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/textileio" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://blog.textile.io/" class="md-footer-social__link fa fa-medium"></a>
    
      <a href="https://slack.textile.io" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.12aa63bf.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
        <script src="../js/sidebar.js"></script>
      
        <script src="../search/main.js"></script>
      
    
  </body>
</html>